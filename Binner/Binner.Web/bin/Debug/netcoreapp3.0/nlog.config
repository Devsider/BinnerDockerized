<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      internalLogFile="c:\logs\Binner-internal.log"
      internalLogLevel="Info">
  <variable name="Layout"
            value="${longdate}|${level:uppercase=true}|${logger}|${message}|${exception:format=tostring}"/>
  <targets>
    <target type="File" name="file"
            layout="${Layout}"
            fileName="C:/logs/Binner.log"
            archiveFileName="C:/logs/archives/Binner.{#####}.log"
            archiveAboveSize="10485760" archiveNumbering="Sequence" concurrentWrites="true"
            keepFileOpen="false" maxArchiveFiles="10"/>
    <target type="File" name="microsoftfile"
            layout="${Layout}"
            fileName="C:/logs/Binner.Microsoft.log"
            archiveFileName="C:/logs/archives/Binner.Microsoft.{#####}.log"
            archiveAboveSize="10485760" archiveNumbering="Sequence" concurrentWrites="true"
            keepFileOpen="false" maxArchiveFiles="2"/>
    <target type="ColoredConsole" name="console"
            layout="${Layout}"
            useDefaultRowHighlightingRules="false">
      <highlight-row condition="equals('${event-context:item=color}','Red')" foregroundColor="Red" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','DarkRed')" foregroundColor="DarkRed" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Green')" foregroundColor="Green" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','DarkGreen')" foregroundColor="DarkGreen" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Blue')" foregroundColor="Blue" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Yellow')" foregroundColor="Yellow" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','DarkYellow')" foregroundColor="DarkYellow" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','White')" foregroundColor="White" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Gray')" foregroundColor="Gray" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','DarkGray')" foregroundColor="Gray" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Cyan')" foregroundColor="Cyan" backgroundColor="NoChange"/>
      <highlight-row condition="equals('${event-context:item=color}','Magenta')" foregroundColor="Magenta" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Fatal" foregroundColor="Red" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Error" foregroundColor="Red" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Warn" foregroundColor="Yellow" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Info" foregroundColor="White" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Debug" foregroundColor="Gray" backgroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Trace" foregroundColor="DarkGray" backgroundColor="NoChange"/>
    </target>
    <target xsi:type="Null" name="BlackHole" formatMessage="false"  />
  </targets>
  <rules>
    <logger name="Microsoft.*" minLevel="Info" appendTo="microsoftfile" />
    <logger name="Microsoft.*" minLevel="Trace" final="true" writeTo="BlackHole" />
    <logger name="*" minLevel="Trace" appendTo="console"/>
    <logger name="*" minLevel="Trace" appendTo="file"/>
  </rules>
</nlog>
